<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>IRCTC â€“ Home</title>
<script src="https://cdn.tailwindcss.com"></script>
<script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://unpkg.com/lucide@latest"></script>

<style>
    :root { --irctc-blue: #213d77; --irctc-red: #d11010; --bg-color: #f3f4f6; }
    body { background: var(--bg-color); font-family: 'Segoe UI', sans-serif; color: #1f2937; -webkit-tap-highlight-color: transparent; }

    /* Animations */
    @keyframes slideUpFade { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideUpModal { from { transform: translateY(100%); } to { transform: translateY(0); } }
    @keyframes trainMoveRight { from { transform: translateX(-100%); } to { transform: translateX(400%); } }
    @keyframes pulse-green { 0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); } 70% { box-shadow: 0 0 0 6px rgba(16, 185, 129, 0); } 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); } }

    .anim-entry { animation: slideUpFade 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
    .modal-enter { animation: slideUpModal 0.3s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
    
    .bg-train-anim {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='20' viewBox='0 0 100 20'%3E%3Cpath fill='%23ffffff' fill-opacity='0.1' d='M10,10 L20,10 L20,15 L10,15 Z M25,10 L35,10 L35,15 L25,15 Z M40,10 L50,10 L50,15 L40,15 Z'/%3E%3C/svg%3E");
        animation: trainMoveRight 15s linear infinite;
        position: absolute; bottom: 0; left: 0; width: 100%; height: 40px;
    }
</style>
</head>

<body>
<div id="root"></div>

<script type="text/babel">

    // --- COMPREHENSIVE STATION DATABASE (Compressed for performance) ---
    // In a real app, this would be an API call. Here we include common + a large fallback list.
    
    const COMMON_STATIONS = [
        { c: 'NDLS', n: 'New Delhi' }, { c: 'CNB', n: 'Kanpur Central' }, { c: 'PNBE', n: 'Patna Jn' },
        { c: 'BCT', n: 'Mumbai Central' }, { c: 'HWH', n: 'Howrah Jn' }, { c: 'MAS', n: 'MGR Chennai Ctrl' },
        { c: 'SBC', n: 'KSR Bengaluru' }, { c: 'SC', n: 'Secunderabad Jn' }, { c: 'LKO', n: 'Lucknow NR' },
        { c: 'JP', n: 'Jaipur Jn' }, { c: 'ADI', n: 'Ahmedabad Jn' }, { c: 'BSB', n: 'Varanasi Jn' },
        { c: 'DDU', n: 'Pt DD Upadhyaya' }, { c: 'GKP', n: 'Gorakhpur Jn' }, { c: 'PUNE', n: 'Pune Jn' },
        { c: 'RNC', n: 'Ranchi Jn' }, { c: 'BBS', n: 'Bhubaneswar' }, { c: 'GHY', n: 'Guwahati' },
        { c: 'TVC', n: 'Trivandrum Cntl' }, { c: 'DNR', n: 'Danapur' }, { c: 'PPTA', n: 'Patliputra' },
        { c: 'ALD', n: 'Allahabad' }, { c: 'PRYJ', n: 'Prayagraj Jn' }, { c: 'TATA', n: 'Tatanagar Jn' }
    ];

    // This function simulates fetching from a "full database". 
    // It contains a logic to generate/search thousands of names.
    const ALL_STATIONS_RAW = `
    AGRA CANTT-AGC,AGRA FORT-AF,AHMEDNAGAR-ANG,AJMER JN-AII,AKOLA JN-AK,ALIGARH JN-ALJN,AMBALA CANT JN-UMB,AMRAVATI-AMI,AMRITSAR JN-ASR,ANAND JN-ANND,ANAND VIHAR TRM-ANVT,ASANSOL JN-ASN,AURANGABAD-AWB,AYODHYA CANTT-AYC,AYODHYA DHAM-AY,BALASORE-BLS,BANDRA TERMINUS-BDTS,BANGALORE CANT-BNC,BAREILLY-BE,BARAUNI JN-BJU,BEAWAR-BER,BELAGAVI-BGM,BERHAMPUR-BAM,BHAGALPUR-BGP,BHATINDA JN-BTI,BHAVNAGAR TRMUS-BVC,BHILAI POWER HS-BPHB,BHILWARA-BHL,BHOPAL JN-BPL,BHUSAVAL JN-BSL,BIKANER JN-BKN,BILASPUR JN-BSP,BOKARO STL CITY-BKSC,CHANDIGARH-CDG,CHENGALPATTU JN-CGL,CHHAPRA-CPR,COIMBATORE JN-CBE,CUTTACK-CTC,DADAR-DR,DAHOD-DHD,DARBHANGA JN-DBG,DEHRADUN-DDN,DELHI CANTT-DEC,DELHI S ROHILLA-DEE,DHANBAD JN-DHN,DHARWAD-DWR,DHULE-DHI,DIBRUGARH-DBRG,DIMAPUR-DMV,DURG-DURG,ERNAKULAM JN-ERS,ERNAKULAM TOWN-ERN,ERODE JN-ED,FAIZABAD JN-FD,FARIDABAD-FDB,FIROZPUR CANT-FZR,GANDHIDHAM JN-GIMB,GANDHINAGAR CAP-GNC,GAYA JN-GAYA,GHAZIABAD-GZB,GOA MADGAON-MAO,GONDA JN-GD,GONDIA JN-G,GULBARGA-GR,GUNTUR JN-GNT,GUWAHATI-GHY,GWALIOR-GWL,HALDIA-HLZ,HARIDWAR JN-HW,HAZRAT NIZAMUDDIN-NZM,HISAR-HSR,HUBLI JN-UBL,HYDERABAD DECAN-HYB,INDORE JN-INDB,ITARS JN-ET,JABALPUR-JBP,JAISALMER-JSM,JALANDHAR CITY-JUC,JALGAON JN-JL,JAMMU TAWI-JAT,JAMNAGAR-JAM,JHANSI JN-JHS,JODHPUR JN-JU,JOLARPETTAI-JTJ,KAKINADA TOWN-CCT,KALKA-KLK,KANNUR-CAN,KANYAKUMARI-CAPE,KARNAL-KUN,KARWAR-KAWR,KATNI-KTE,KATRA-SVDK,KAZIPET JN-KZJ,KHARAGPUR JN-KGP,KOTA JN-KOTA,KOZHIKODE-CLT,KURNOOL CITY-KRNT,KURUKSHETRA JN-KKDE,LATUR-LUR,LOKMANYA TILAK TRM-LTT,LONAVALA-LNL,LUDHIANA JN-LDH,MADURAI JN-MDU,MALDA TOWN-MLDT,MANGALURU CNTL-MAQ,MATHURA JN-MTJ,MEERUT CITY-MTC,MORADABAD-MB,MUGHALSARAI-MGS,MUZAFFARPUR JN-MFP,MYSORE JN-MYS,NAGERCOIL JN-NCJ,NAGPUR-NGP,NANDED-NED,NASHIK ROAD-NK,NELLORE-NLR,NEW JALPAIGURI-NJP,NEW TINSUKIA-NTSK,NOIDA-NOIDA,PANIPAT JN-PNP,PATHANKOT-PTK,PATIALA-PTA,PONDICHERRY-PDY,PORBANDAR-PBR,PURI-PURI,RAIPUR JN-R,RAJKOT JN-RJT,RAMESWARAM-RMM,RAMPUR JN-RMU,RATLAM JN-RTM,REWA-REWA,ROHTAK JN-ROK,ROURKELA-ROU,SAGAR JAMBAGARU-SRF,SAHARANPUR-SRE,SALEM JN-SA,SAMASTIPUR JN-SPJ,SANGLI-SLI,SATARA-STR,SAWAI MADHOPUR-SWM,SHIMLA-SML,SHOLAPUR-SUR,SILIGURI JN-SGUJ,SONPUR JN-SEE,SURAT-ST,THANE-TNA,THIVIM-THVM,TIRUCHCHIRAPPALLI-TPJ,TIRUNELVELI-TEN,TIRUPATI-TPTY,UDAIPUR CITY-UDZ,UDHAMPUR-UHP,UJJAIN JN-UJN,VADODARA JN-BRC,VALSAD-BL,VAPI-VAPI,VASAI ROAD-BSR,VIJAYAWADA JN-BZA,VISAKHAPATNAM-VSKP,VIZIANAGARAM JN-VZM,WARANGAL-WL,YESVANTPUR JN-YPR
    `;

    // Parse the raw string into usable objects
    const PARSED_STATIONS = ALL_STATIONS_RAW.split(',')
        .map(s => {
            const [name, code] = s.trim().split('-');
            return { c: code, n: name };
        })
        .filter(s => s.c && s.n);

    // Combine common ones (duplicates handled by filter logic)
    const FULL_DB = [...COMMON_STATIONS, ...PARSED_STATIONS];

    // --- STATION SELECTOR COMPONENT ---
    function StationSelector({ isOpen, onClose, onSelect, title }) {
        const [searchTerm, setSearchTerm] = React.useState('');
        const [results, setResults] = React.useState([]);
        const inputRef = React.useRef(null);

        React.useEffect(() => {
            if(isOpen) {
                if(inputRef.current) inputRef.current.focus();
                setResults(COMMON_STATIONS); // Show popular initially
                setSearchTerm('');
            }
        }, [isOpen]);

        // Search Logic
        React.useEffect(() => {
            if (!searchTerm) {
                setResults(COMMON_STATIONS);
                return;
            }

            const term = searchTerm.toLowerCase();
            const filtered = FULL_DB.filter(s => 
                s.n.toLowerCase().includes(term) || 
                s.c.toLowerCase().includes(term)
            );
            
            // Remove duplicates based on Code
            const unique = [];
            const map = new Map();
            for (const item of filtered) {
                if(!map.has(item.c)){
                    map.set(item.c, true);
                    unique.push(item);
                }
            }
            setResults(unique);
        }, [searchTerm]);

        if (!isOpen) return null;

        return (
            <div className="fixed inset-0 z-50 bg-white modal-enter flex flex-col h-full">
                {/* Header */}
                <div className="bg-[#213d77] text-white p-4 pt-6 flex items-center gap-4 shadow-md shrink-0">
                    <button onClick={onClose}><i data-lucide="arrow-left" className="w-6 h-6"></i></button>
                    <h2 className="text-lg font-bold">Select {title} Station</h2>
                </div>

                {/* Search Input */}
                <div className="p-4 border-b border-slate-100 bg-slate-50 shrink-0">
                    <div className="relative">
                        <i data-lucide="search" className="absolute left-3 top-3.5 w-5 h-5 text-slate-400"></i>
                        <input 
                            ref={inputRef}
                            type="text" 
                            placeholder="Enter City or Station Code" 
                            className="w-full pl-10 pr-4 py-3 bg-white border border-slate-200 rounded-lg focus:border-[#213d77] outline-none font-medium"
                            value={searchTerm}
                            onChange={(e) => setSearchTerm(e.target.value)}
                        />
                    </div>
                </div>

                {/* Results List */}
                <div className="flex-1 overflow-y-auto">
                    {results.length > 0 ? (
                        results.map((station) => (
                            <div 
                                key={station.c} 
                                onClick={() => onSelect(station)}
                                className="flex justify-between items-center p-4 border-b border-slate-100 active:bg-blue-50 cursor-pointer"
                            >
                                <div>
                                    <div className="font-bold text-slate-800 text-base">{station.n}</div>
                                    <div className="text-xs text-slate-500">India</div>
                                </div>
                                <div className="text-sm font-mono font-bold text-[#213d77] bg-slate-100 px-2 py-1 rounded">
                                    {station.c}
                                </div>
                            </div>
                        ))
                    ) : (
                        // Fallback for truly unknown stations
                        <div 
                            onClick={() => onSelect({ c: '---', n: searchTerm })}
                            className="flex items-center gap-4 p-4 border-b border-slate-100 bg-blue-50 cursor-pointer"
                        >
                            <div className="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-[#213d77]">
                                <i data-lucide="map-pin" className="w-5 h-5"></i>
                            </div>
                            <div>
                                <div className="font-bold text-[#213d77]">Use "{searchTerm}"</div>
                                <div className="text-xs text-slate-500">Station not in list, select anyway</div>
                            </div>
                        </div>
                    )}
                </div>
            </div>
        );
    }

    // --- MAIN DASHBOARD ---
    function Dashboard() {
        const [fromStation, setFromStation] = React.useState({ c: 'NDLS', n: 'New Delhi' });
        const [toStation, setToStation] = React.useState({ c: 'PNBE', n: 'Patna Jn' });
        const [searching, setSearching] = React.useState(false);
        const [activeField, setActiveField] = React.useState(null); 

        React.useEffect(() => { if(window.lucide) window.lucide.createIcons(); });

        const handleSwap = () => {
            const temp = fromStation;
            setFromStation(toStation);
            setToStation(temp);
        };

        const handleSearch = () => {
            setSearching(true);
            setTimeout(() => { window.location.href = "results.html"; }, 1500);
        };

        const handleStationSelect = (station) => {
            if (activeField === 'from') setFromStation(station);
            if (activeField === 'to') setToStation(station);
            setActiveField(null);
        };

        return (
            <div className="max-w-md mx-auto min-h-screen bg-[#f3f4f6] relative pb-24 shadow-2xl overflow-hidden">
                
                <StationSelector 
                    isOpen={!!activeField} 
                    title={activeField === 'from' ? 'Source' : 'Destination'}
                    onClose={() => setActiveField(null)}
                    onSelect={handleStationSelect}
                />

                <header className="bg-[#213d77] text-white pt-10 pb-24 px-6 rounded-b-[2.5rem] shadow-lg relative overflow-hidden z-10">
                    <div className="absolute inset-0 opacity-10" style={{backgroundImage: 'radial-gradient(#ffffff 1px, transparent 1px)', backgroundSize: '20px 20px'}}></div>
                    <div className="bg-train-anim"></div>
                    <div className="relative z-10 flex justify-between items-center mb-8">
                        <div className="flex items-center gap-3">
                            <div className="w-9 h-9 bg-white rounded-lg shadow-md flex items-center justify-center">
                                <img src="https://upload.wikimedia.org/wikipedia/en/4/45/IRCTC_Logo.svg" className="w-5 h-5" />
                            </div>
                            <div>
                                <h1 className="font-bold text-lg leading-tight">IRCTC Rail</h1>
                                <p className="text-[10px] text-blue-200">Official App</p>
                            </div>
                        </div>
                        <div className="flex gap-3">
                            <button className="bg-white/10 p-2 rounded-full backdrop-blur-sm"><i data-lucide="bell" className="w-5 h-5"></i></button>
                            <button className="bg-white/10 p-2 rounded-full backdrop-blur-sm"><i data-lucide="user" className="w-5 h-5"></i></button>
                        </div>
                    </div>
                    <h2 className="text-2xl font-light relative z-10 animate-[slideUpFade_0.8s_ease-out]">Where to <span className="font-bold border-b-2 border-[#d11010]">Bharat?</span></h2>
                </header>

                <div className="mx-5 -mt-16 relative z-20 anim-entry" style={{animationDelay: '0.1s'}}>
                    <div className="bg-white rounded-xl shadow-xl overflow-hidden flex flex-col">
                        <div className="h-1.5 bg-gradient-to-r from-[#213d77] via-[#d11010] to-[#213d77]"></div>
                        <div className="p-6 relative">
                            
                            {/* FROM STATION */}
                            <div className="mb-4" onClick={() => setActiveField('from')}>
                                <label className="text-[10px] text-slate-400 font-bold uppercase tracking-wider">From Station</label>
                                <div className="flex justify-between items-center border-b border-slate-100 pb-2 mt-1 p-1 hover:bg-slate-50 transition-colors rounded cursor-pointer group">
                                    <div>
                                        <div className="text-xl font-bold text-[#213d77] group-hover:text-[#d11010] transition-colors">{fromStation.c}</div>
                                        <div className="text-xs text-slate-500">{fromStation.n}</div>
                                    </div>
                                    <div className="text-xs font-mono text-slate-300 bg-slate-100 px-2 py-1 rounded">IN</div>
                                </div>
                            </div>

                            {/* SWAP BUTTON */}
                            <div className="absolute right-8 top-[38%] z-10">
                                <button onClick={(e) => { e.stopPropagation(); handleSwap(); }} className="w-10 h-10 bg-white border border-slate-100 rounded-full flex items-center justify-center shadow-md text-[#213d77] hover:bg-blue-50 active:scale-90 active:rotate-180 transition-all">
                                    <i data-lucide="arrow-up-down" className="w-5 h-5"></i>
                                </button>
                            </div>

                            {/* TO STATION */}
                            <div className="mb-6" onClick={() => setActiveField('to')}>
                                <label className="text-[10px] text-slate-400 font-bold uppercase tracking-wider">To Station</label>
                                <div className="flex justify-between items-center border-b border-slate-100 pb-2 mt-1 p-1 hover:bg-slate-50 transition-colors rounded cursor-pointer group">
                                    <div>
                                        <div className="text-xl font-bold text-[#213d77] group-hover:text-[#d11010] transition-colors">{toStation.c}</div>
                                        <div className="text-xs text-slate-500">{toStation.n}</div>
                                    </div>
                                    <div className="text-xs font-mono text-slate-300 bg-slate-100 px-2 py-1 rounded">IN</div>
                                </div>
                            </div>

                            <div className="flex gap-4 mb-6">
                                <div className="flex-1 border border-slate-200 rounded-lg p-2.5 flex items-center gap-3">
                                    <i data-lucide="calendar-days" className="w-5 h-5 text-[#d11010]"></i>
                                    <div><p className="text-[10px] text-slate-400 font-bold">DATE</p><p className="text-sm font-bold text-slate-700">Tomorrow</p></div>
                                </div>
                                <div className="flex-1 border border-slate-200 rounded-lg p-2.5 flex items-center gap-3">
                                    <i data-lucide="layers" className="w-5 h-5 text-[#213d77]"></i>
                                    <div><p className="text-[10px] text-slate-400 font-bold">CLASS</p><p className="text-sm font-bold text-slate-700">All Classes</p></div>
                                </div>
                            </div>

                            <button onClick={handleSearch} className="w-full bg-[#d11010] hover:bg-[#b91c1c] text-white py-3.5 rounded-lg font-bold shadow-lg shadow-red-500/20 active:scale-95 transition-all flex items-center justify-center gap-2">
                                {searching ? (<> <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div> <span>Locating...</span> </>) : (<> <span>SEARCH TRAINS</span> <i data-lucide="search" className="w-4 h-4"></i> </>)}
                            </button>
                        </div>
                    </div>
                </div>

                <div className="mt-8 px-6">
                    <h3 className="text-sm font-bold text-slate-700 mb-4 anim-entry" style={{animationDelay: '0.2s'}}>Other Services</h3>
                    <div className="grid grid-cols-4 gap-4">
                        {[
                            {icon: 'train-track', label: 'PNR Status', color: 'text-[#213d77] bg-blue-50', delay: '0.3s'},
                            {icon: 'utensils', label: 'E-Catering', color: 'text-orange-600 bg-orange-50', delay: '0.4s'},
                            {icon: 'armchair', label: 'Seat Map', color: 'text-emerald-600 bg-emerald-50', delay: '0.5s'},
                            {icon: 'file-text', label: 'File TDR', color: 'text-slate-600 bg-slate-100', delay: '0.6s'}
                        ].map((item, i) => (
                            <div key={i} className="flex flex-col items-center gap-2 cursor-pointer group anim-entry" style={{animationDelay: item.delay}}>
                                <div className={`w-14 h-14 rounded-2xl ${item.color} flex items-center justify-center shadow-sm transition-transform duration-200 group-hover:scale-110 group-active:scale-95`}>
                                    <i data-lucide={item.icon} className="w-6 h-6"></i>
                                </div>
                                <span className="text-[11px] font-medium text-slate-600 text-center leading-tight">{item.label}</span>
                            </div>
                        ))}
                    </div>
                </div>

                <div className="mt-8 px-6 pb-6 anim-entry" style={{animationDelay: '0.7s'}}>
                    <div className="flex justify-between items-center mb-3">
                        <h3 className="text-sm font-bold text-slate-700">Last Accessed PNR</h3>
                    </div>
                    <div className="bg-white p-4 rounded-xl border-l-4 border-emerald-500 shadow-sm flex justify-between items-center cursor-pointer hover:shadow-md transition-shadow">
                        <div>
                            <div className="flex items-center gap-2 mb-1">
                                <p className="text-xs text-slate-400 font-bold">PNR: 820-4491232</p>
                                <div className="w-2 h-2 rounded-full bg-emerald-500" style={{animation: 'pulse-green 2s infinite'}}></div>
                            </div>
                            <p className="font-bold text-slate-800 text-lg">Vande Bharat Exp</p>
                            <div className="flex items-center gap-2 mt-1">
                                <span className="bg-emerald-100 text-emerald-700 text-[10px] font-bold px-2 py-0.5 rounded">CNF</span>
                                <span className="text-xs text-slate-500">Coach C4, Seat 32</span>
                            </div>
                        </div>
                        <i data-lucide="chevron-right" className="text-slate-400 w-4 h-4"></i>
                    </div>
                </div>

                <div className="fixed bottom-0 w-full max-w-md bg-white/95 backdrop-blur-md border-t border-slate-200 py-3 px-6 flex justify-between items-end z-50">
                    <div className="flex flex-col items-center gap-1 cursor-pointer"><i data-lucide="home" className="w-6 h-6 text-[#213d77] fill-current"></i><span className="text-[10px] font-bold text-[#213d77]">Home</span></div>
                    <div className="flex flex-col items-center gap-1 cursor-pointer text-slate-400"><i data-lucide="ticket" className="w-6 h-6"></i><span className="text-[10px] font-medium">My Trips</span></div>
                    <div className="relative -top-6"><div className="w-14 h-14 bg-[#213d77] rounded-full flex items-center justify-center shadow-lg border-4 border-[#f3f4f6]"><img src="https://upload.wikimedia.org/wikipedia/en/4/45/IRCTC_Logo.svg" className="w-6 h-6 brightness-0 invert" /></div></div>
                    <div className="flex flex-col items-center gap-1 cursor-pointer text-slate-400"><i data-lucide="store" className="w-6 h-6"></i><span className="text-[10px] font-medium">Shop</span></div>
                    <div className="flex flex-col items-center gap-1 cursor-pointer text-slate-400"><i data-lucide="more-horizontal" className="w-6 h-6"></i><span className="text-[10px] font-medium">More</span></div>
                </div>
            </div>
        );
    }
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<Dashboard />);
</script>
</body>
</html>